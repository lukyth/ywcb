<h1>{{track.name}}</h1>
by {{track.user().first().display_name}}
<p>{{track.description}}</p>

{% for item in track.parents %}
parent: <a href="/t/{{item.id}}">{{item.name}}</a>
{% endfor %}

{% for item in rel %}
child: <a href="/t/{{item.track_1().first().id}}">{{item.track_1().first().name}}</a>
{% endfor %}

<p id="player"></p>
<a href="#" id="play">play</a>
<a href="#" id="stop">stop</a>

<a href="/t/{{track.id}}/jam">Jam</a>

<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
(function(){

'use strict';

// i'm in a rush so sloppy coding

var tracks = [
	{% for item in track.parents %}
	{{item.file|json_encode|raw}},
	{% endfor %}
	{{track.file|json_encode|raw}},
];

var players = [];

tracks.forEach(function(v){
	players.push($("<audio>").attr({
		'controls': false,
		'preload': true,
		'src': v
	}).appendTo('#player').get(0));
});

$("#play").click(function(){
	players.forEach(function(item){
		item.pause();
		item.currentTime = 0;
		console.log(item.currentTime);
		item.play();
	});
	return false;
});

$("#stop").click(function(){
	players.forEach(function(item){
		item.pause();
	});
	return false;
});


})();
</script>